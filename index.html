<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio</title>
</head>

<body>
    <div>
        <p id="latlng"></p>
    </div>
    <script>
        handlePermission()
        let latlng = document.getElementById('latlng');
        let options = {
            enableHighAccuracy: false,
            timeout: 1000,
            maximumAge: 0
        };
        let id = navigator.geolocation.watchPosition(pos => {
            latlng.innerHTML = pos.coords.latitude + ", " + pos.coords.longitude;
        }, err => {

            alert(err.message)
        }, options)

        function handlePermission() {
            navigator.permissions.query({
                name: 'geolocation'
            }).then(function (result) {
                if (result.state == 'granted') {
                    report(result.state);
                } else if (result.state == 'prompt') {
                    report(result.state);
                } else if (result.state == 'denied') {
                    report(result.state);
                    geoBtn.style.display = 'inline';
                }
                result.onchange = function () {
                    report(result.state);
                }
            });
        }

        function report(state) {
            console.log('Permission ' + state);
        }
    </script>
</body>

</html>